# ~/.config/starship.toml

"$schema" = "https://starship.rs/config-schema.json"

format = """
[Óúë](fg:#a3aed2)\
[ÓÇ∞](bg:#334d7e fg:#1e1e2e)\
$directory\
[ÓÇ∞](fg:#334d7e bg:#046b1f)\
${custom.git_server}\
$git_branch\
$git_status\
[ÓÇ∞](fg:#046b1f bg:#1e1e2e)\
$cmd_duration\
$custom.rye\
$custom.uv\
$custom.python_project\
$python\
$time\
$line_break\
$character"""

right_format = """
$username\
$hostname\
"""

[username]
style_user = "bold fg:#82aaff"
show_always = false
format = "[$user]($style)"

[hostname]
ssh_only = true
trim_at = "-"
format = "[@$hostname]($style)"
style = "fg:#5c6370 bold"

[directory]
style = "bg:#334d7e fg:#ffffff"
format = " [$path]($style)"
truncation_length = 5
truncation_symbol = "‚Ä¶/"
home_symbol = "~"

[directory.substitutions]
"Documents" = "Ôúò"
"Downloads" = "ÔÄô"
"Music" = "ÔÄÅ"
"Pictures" = "ÔÄæ"

[git_branch]
symbol = "Ôêò"
style = "bg:#046b1f fg:#ffffff"
format = '[ $symbol $branch ]($style)'

[git_status]
style = "bg:#046b1f fg:#ffffff"
format = '[ $all_status$ahead_behind ]($style)'
conflicted = "‚öîÔ∏è "
ahead = "‚á°${count} "
behind = "‚á£${count} "
diverged = "‚áï‚á°${ahead_count} ‚á£${behind_count} "
untracked = "ÔÑ® ${count} "
stashed = "üì¶ "
modified = "ÔÅÑ ${count} "
staged = "ÔÅÜ ${count} "
deleted = "Ôá∏ ${count} "

[cmd_duration]
min_time = 500
format = " [ÓéÖ $duration]($style)"
style = "fg:#83769c"

[time]
disabled = false
time_format = "%H:%M:%S"
format = " [$time]($style)"
style = "fg:#22da6e"

[character]
success_symbol = "[‚ùØ](bold green)"
error_symbol = "[‚ùØ](bold red)"
vicmd_symbol = "[‚ùÆ](bold yellow)"

[python]
format = '[Óúº ($version)]($style) [$virtualenv]($style)'
style = 'fg:#D4E157'
pyenv_version_name = true
detect_extensions = ["py"]
detect_files = [
  "pyproject.toml",
  "requirements.txt",
  "setup.py",
  "Pipfile",
  ".python-version",
  "rye.lock"
]

[custom.git_server]
command = """
GIT_REMOTE=$(git ls-remote --get-url 2> /dev/null)
if [[ "$GIT_REMOTE" =~ github ]]; then echo "Ôêà"
elif [[ "$GIT_REMOTE" =~ gitlab ]]; then echo "Ôäñ"
elif [[ "$GIT_REMOTE" =~ bitbucket ]]; then echo "ÔÖ±"
else echo "Ôû°"
fi
"""
when = 'git rev-parse --is-inside-work-tree 2> /dev/null'
style = "bg:#046b1f fg:#ffffff"
format = '[ $output ]($style)'
ignore_timeout = true

[custom.rye]
command = "rye show --python-path 2>/dev/null | sed -n 's/.*Python \\(.*\\)/\\1/p'"
when = "test -f rye.lock"
format = '[üçû Rye $output]($style)'
style = 'fg:#ffa500'

[custom.uv]
command = "uv --version | awk '{print $2}'"
when = "test -f uv.lock"
format = '[‚ö° uv $output]($style)'
style = 'fg:bright-blue'

[custom.python_project]
command = "grep -m1 '^name' pyproject.toml | cut -d '\"' -f2"
when = "test -f pyproject.toml"
format = '[üì¶ $output]($style)'
style = 'fg:cyan'
